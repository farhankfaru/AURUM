<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AURUM</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; font-size: 16px; }
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; line-height: 1.6; color: #2c2c2c; 
            background-color: #ffffff; overflow-x: hidden; padding-top: 80px; }
        body.nav-open { overflow: hidden; }
        img { max-width: 100%; height: auto; display: block; }
        button { border: none; background: none; cursor: pointer; font-family: inherit; }
        a { text-decoration: none; color: inherit; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 2rem; }
        
        /* Header */
        .header { position: fixed; top: 0; left: 0; right: 0; z-index: 1000; background: rgba(255, 255, 255, 0.95); 
            backdrop-filter: blur(20px); border-bottom: 1px solid rgba(0, 0, 0, 0.05); transition: all 0.3s ease; }
        .header.scrolled { background: rgba(255, 255, 255, 0.98); box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); }
        .navbar { padding: 1rem 0; }
        .navbar .container { display: flex; justify-content: space-between; align-items: center; }
        
        /* Brand */
        .nav-brand { font-family: 'Playfair Display', serif; font-size: 1.8rem; font-weight: 600; color: #2c2c2c; letter-spacing: 2px; }
        .brand-name { transition: color 0.3s ease; }
        .brand-name:hover { color: #8B7355; }
        
        /* Navigation */
        .nav-menu { display: flex; }
        .nav-links { display: flex; list-style: none; gap: 2.5rem; }
        .nav-link { font-weight: 500; font-size: 0.9rem; letter-spacing: 0.5px; color: #2c2c2c; position: relative; 
            transition: all 0.3s ease; padding: 0.5rem 0; }
        .nav-link::after { content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 2px; background: #8B7355; transition: width 0.3s ease; }
        .nav-link:hover::after, .nav-link.active::after { width: 100%; }
        .nav-link:hover, .nav-link.active { color: #8B7355; }
        
        /* Icons */
        .nav-icons { display: flex; gap: 1.5rem; align-items: center; }
        .icon-wrapper { position: relative; padding: 0.5rem; }
        .nav-icon { font-size: 1.2rem; color: #2c2c2c; transition: all 0.3s ease; cursor: pointer; }
        .nav-icon:hover { color: #8B7355; transform: scale(1.1); }
        .icon-badge { position: absolute; top: 0; right: 0; background: #8B7355; color: white; border-radius: 50%; 
            width: 18px; height: 18px; font-size: 0.7rem; display: flex; align-items: center; justify-content: center; font-weight: 600; }
        
        /* Profile Dropdown */
        .profile-dropdown { position: relative; }
        .dropdown-menu { position: absolute; top: calc(100% + 10px); right: 0; background: white; border-radius: 8px; 
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); padding: 8px; min-width: 160px; display: none; z-index: 1000; border: 1px solid rgba(0, 0, 0, 0.1); }
        .dropdown-menu.show { display: block; }
        .dropdown-link { width: 100%; padding: 10px 12px; background: transparent; color: #2c2c2c; font-size: 0.85rem; font-weight: 500; 
            text-align: left; cursor: pointer; transition: all 0.3s ease; border-radius: 6px; font-family: inherit; display: block; border: none; text-decoration: none; }
        .dropdown-link:hover { background: #f8f8f8; color: #8B7355; }
        .dropdown-link.logout-link:hover { background: #8B7355; color: white; }
        .user-welcome { font-size: 0.8rem; color: #666; padding: 8px 12px; border-bottom: 1px solid #f0f0f0; margin-bottom: 4px; font-weight: 500; }
        .dropdown-menu::before { content: ''; position: absolute; top: -8px; right: 15px; width: 0; height: 0; 
            border-left: 8px solid transparent; border-right: 8px solid transparent; border-bottom: 8px solid white; }
        
        /* Hamburger */
        .hamburger { display: none; flex-direction: column; cursor: pointer; padding: 0.5rem; gap: 4px; }
        .hamburger-line { width: 25px; height: 3px; background: #2c2c2c; transition: all 0.3s ease; border-radius: 2px; }
        .hamburger.active .hamburger-line:nth-child(1) { transform: rotate(45deg) translate(7px, 7px); }
        .hamburger.active .hamburger-line:nth-child(2) { opacity: 0; }
        .hamburger.active .hamburger-line:nth-child(3) { transform: rotate(-45deg) translate(7px, -7px); }
        
        /* Responsive */
        @media (max-width: 768px) {
            .hamburger { display: flex; }
            .nav-menu { position: fixed; left: -100%; top: 80px; width: 100%; height: calc(100vh - 80px); 
                background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(20px); flex-direction: column; 
                justify-content: flex-start; align-items: center; padding-top: 3rem; transition: left 0.3s ease; z-index: 999; }
            .nav-menu.active { left: 0; }
            .nav-links { flex-direction: column; gap: 2rem; }
            .nav-link { font-size: 1.1rem; padding: 1rem 2rem; }
            .dropdown-menu { position: static; display: block; box-shadow: none; border: none; background: #f8f8f8; 
                margin-top: 1rem; border-radius: 0; }
            .dropdown-menu::before { display: none; }
            .container { padding: 0 1rem; }
        }
        @media (max-width: 480px) {
            .nav-icons { gap: 1rem; }
            .dropdown-link { font-size: 0.8rem; padding: 0.6rem 0.8rem; }
        }
        
        /* Accessibility */
        button:focus, input:focus, .nav-link:focus { outline: 2px solid #8B7355; outline-offset: 2px; }
        @media (prefers-reduced-motion: reduce) {
            * { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; }
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="navbar">
            <div class="container">
                <div class="nav-brand">
                    <span class="brand-name">AURUM</span>
                </div>
                
                <div class="nav-menu" id="nav-menu">
                    <ul class="nav-links">
                        <li><a href="/" class="nav-link active">HOME</a></li>
                        <li><a href="#shop" class="nav-link">SHOP</a></li>
                        <li><a href="#collection" class="nav-link">COLLECTION</a></li>
                        <li><a href="#about" class="nav-link">ABOUT</a></li>
                        <li><a href="#contact" class="nav-link">CONTACT</a></li>
                    </ul>
                </div>
                
                <div class="nav-icons">
                    <div class="icon-wrapper">
                        <i class="far fa-heart nav-icon" title="Wishlist" id="wishlistIcon"></i>
                        <span class="icon-badge" id="wishlistCount">0</span>
                    </div>
                    <div class="icon-wrapper">
                        <i class="fas fa-shopping-bag nav-icon" title="Cart" id="cartIcon"></i>
                        <span class="icon-badge" id="cartCount">0</span>
                    </div>
                    
                    <div class="icon-wrapper profile-dropdown" id="profile-dropdown">
                        <i class="far fa-user nav-icon" title="Profile"></i>
                        <div class="dropdown-menu" id="dropdown-menu">
                            <% if (user) { %>
                                <div class="user-welcome">Hello, <%= user.name.split(' ')[0] %>!</div>
                                <a href="/profile" class="dropdown-link profile-link">
                                    <i class="far fa-user" style="margin-right: 8px;"></i>PROFILE
                                </a>
                                <button type="button" class="dropdown-link logout-link" id="logoutBtn">
                                    <i class="fas fa-sign-out-alt" style="margin-right: 8px;"></i>LOGOUT
                                </button>
                            <% } else { %>
                                <a href="/login" class="dropdown-link login-link">
                                    <i class="fas fa-sign-in-alt" style="margin-right: 8px;"></i>LOGIN
                                </a>
                                <a href="/signup" class="dropdown-link signup-link">
                                    <i class="fas fa-user-plus" style="margin-right: 8px;"></i>SIGN UP
                                </a>
                            <% } %>
                        </div>
                    </div>
                </div>
                
                <div class="hamburger" id="hamburger">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </div>
            </div>
        </nav>
    </header>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile navigation
            const hamburger = document.getElementById('hamburger');
            const navMenu = document.getElementById('nav-menu');
            const navLinks = document.querySelectorAll('.nav-link');

            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
                document.body.classList.toggle('nav-open');
            });

            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    hamburger.classList.remove('active');
                    navMenu.classList.remove('active');
                    document.body.classList.remove('nav-open');
                });
            });

            // Profile dropdown
            const profileDropdown = document.getElementById('profile-dropdown');
            const dropdownMenu = document.getElementById('dropdown-menu');
            const profileIcon = profileDropdown ? profileDropdown.querySelector('.nav-icon') : null;

            if (profileDropdown && dropdownMenu && profileIcon) {
                profileIcon.addEventListener('click', (e) => {
                    e.stopPropagation();
                    dropdownMenu.classList.toggle('show');
                });

                document.addEventListener('click', (e) => {
                    if (!profileDropdown.contains(e.target)) {
                        dropdownMenu.classList.remove('show');
                    }
                });

                document.querySelectorAll('.dropdown-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        if (!link.closest('form') && !link.id === 'logoutBtn') {
                            dropdownMenu.classList.remove('show');
                        }
                    });
                });
            }

            // AJAX Logout
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', async function(e) {
                    e.preventDefault();
                    
                    try {
                        const response = await fetch('/logout', {
                            method: 'DELETE',
                            headers: { 'Accept': 'application/json' }
                        });
                        
                        const result = await response.json();
                        
                        if (result.success) {
                            window.location.href = '/';
                        } else {
                            console.error('Logout failed:', result.message);
                            // Fallback to traditional logout
                            window.location.href = '/logout';
                        }
                    } catch (error) {
                        console.error('Logout error:', error);
                        // Fallback to traditional logout
                        window.location.href = '/logout';
                    }
                });
            }

            // Smooth scrolling
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        const headerHeight = document.querySelector('.header').offsetHeight;
                        const targetPosition = target.offsetTop - headerHeight;
                        
                        window.scrollTo({
                            top: targetPosition,
                            behavior: 'smooth'
                        });
                    }
                });
            });

            // Header scroll effect
            window.addEventListener('scroll', () => {
                const header = document.querySelector('.header');
                header.classList.toggle('scrolled', window.scrollY > 100);
            });

            // Cart and wishlist counters (load from localStorage or API)
            updateCounters();
        });

        function updateCounters() {
            // Update cart and wishlist counters
            // This would typically fetch from API or localStorage
            const wishlistCount = localStorage.getItem('wishlistCount') || 0;
            const cartCount = localStorage.getItem('cartCount') || 0;
            
            document.getElementById('wishlistCount').textContent = wishlistCount;
            document.getElementById('cartCount').textContent = cartCount;
        }

        // Export function for other scripts to update counters
        window.updateWishlistCounter = function() {
            const count = document.querySelectorAll('.wishlist-btn.active').length;
            document.getElementById('wishlistCount').textContent = count;
            localStorage.setItem('wishlistCount', count);
        };

        window.updateCartCounter = function(count) {
            document.getElementById('cartCount').textContent = count;
            localStorage.setItem('cartCount', count);
        };
    </script>
</body>
</html>
