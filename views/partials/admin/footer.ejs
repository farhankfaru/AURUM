<!-- This file is located at: views/partials/admin/footer.ejs -->

    </main>

<!-- 
  This script handles the functionality for the admin sidebar menu toggle,
  the mobile overlay, and setting the 'active' class on the current menu item.
-->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const menuToggle = document.getElementById('menuToggle');
        const adminSidebar = document.getElementById('adminSidebar');
        const adminMain = document.getElementById('adminMain');
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        const pageTitle = document.getElementById('pageTitle');
        
        if (menuToggle) {
            menuToggle.addEventListener('click', function() {
                if (window.innerWidth <= 1024) {
                    adminSidebar.classList.toggle('show');
                    sidebarOverlay.classList.toggle('show');
                } else {
                    adminSidebar.classList.toggle('collapsed');
                    adminMain.classList.toggle('expanded');
                }
            });
        }
        
        if (sidebarOverlay) {
            sidebarOverlay.addEventListener('click', function() {
                adminSidebar.classList.remove('show');
                sidebarOverlay.classList.remove('show');
            });
        }

        const currentPath = window.location.pathname;
        let titleFound = false;
        document.querySelectorAll('.menu-item').forEach(item => {
            const href = item.getAttribute('href');
            item.classList.remove('active');
            if (href === currentPath) {
                item.classList.add('active');
                if (pageTitle) pageTitle.textContent = item.getAttribute('data-page');
                titleFound = true;
            }
        });

        if (!titleFound && (currentPath === '/admin' || currentPath === '/admin/')) {
             const dashboardItem = document.querySelector('.menu-item[data-page="Dashboard"]');
             if (dashboardItem) {
                dashboardItem.classList.add('active');
                if (pageTitle) pageTitle.textContent = 'Dashboard';
             }
        }
    });
</script>

</body>
</html>
